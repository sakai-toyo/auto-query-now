# Auto Query Now

URLのクエリパラメータを読み取り、ページ内の特定の入力欄に自動入力するChrome拡張機能です。

## 機能

- URLからカスタムクエリパラメータを読み取り
- ページが完全に読み込まれるまで自動的に待機
- フォーカスされた入力欄を自動検出（最大10秒待機）
- 検出した入力欄に自動的に値を入力
- オプションでEnterキーを自動的に押す
- 複数の設定を管理可能
- CSSセレクタ不要でシンプルに使用可能
- React、Vue、Angularなどのフレームワークに対応

## インストール方法

1. このプロジェクトをクローンまたはダウンロード

2. Chromeで `chrome://extensions/` を開く

3. 右上の「デベロッパーモード」を有効化

4. 「パッケージ化されていない拡張機能を読み込む」をクリック

5. このプロジェクトのフォルダを選択

## 使い方

### 1. 設定画面を開く

- 拡張機能のアイコンを右クリック > 「オプション」を選択
- または `chrome://extensions/` から「詳細」>「拡張機能のオプション」をクリック

### 2. 設定を追加

「新しい設定を追加」ボタンをクリックして、以下の情報を入力：

- **URLクエリパラメータ名**: URLに含めるパラメータ名（例: `my_query`）
- **貼り付け後にEnterキーを押す**: チェックすると自動的にEnterキーを押します
- **この設定を有効にする**: チェックを外すと一時的に無効化できます

### 3. 設定を保存

「設定を保存」ボタンをクリックして設定を保存します。

### 4. 使用例

設定例：
```
クエリパラメータ名: my_query
Enterキーを押す: 有効
```

この設定で、以下のURLにアクセスすると：
```
https://example.com/search?my_query=test
```

ページ読み込み時にフォーカスされている入力欄（検索ボックスなど）に "test" が自動的に入力され、Enterキーが押されます。

## 動作の仕組み

1. ページが完全に読み込まれるまで待機
2. 入力欄にフォーカスが当たるまで待機（最大10秒）
3. フォーカスされた入力欄にクエリパラメータの値を入力
4. （設定されている場合）Enterキーを押す

多くのWebサイトでは、ページ読み込み時に検索ボックスなどが自動的にフォーカスされるため、この拡張機能はそのような入力欄を自動検出して値を入力します。React、Vue、Angularなどのフレームワークで作られたサイトにも対応しています。

## 実用例

### 例1: Google検索
```
クエリパラメータ名: q
Enterキーを押す: 有効
```

URL: `https://www.google.com/?q=Chrome拡張機能`

Googleのトップページにアクセスすると、検索ボックスに自動的にフォーカスが当たるため、"Chrome拡張機能" が自動入力され、検索が実行されます。

### 例2: 検索サイトでの活用
```
クエリパラメータ名: search_term
Enterキーを押す: 有効
```

URL: `https://example.com/?search_term=プログラミング`

検索機能を持つサイトで、検索ボックスにフォーカスが当たっている場合に自動検索できます。

### 例3: 複数のクエリパラメータ
設定1:
```
クエリパラメータ名: username
Enterキーを押す: 無効
```

設定2:
```
クエリパラメータ名: code
Enterキーを押す: 有効
```

URL: `https://example.com/form?username=testuser&code=12345`

最初にフォーカスされている入力欄に "testuser" が入力され、次に "12345" が入力されてEnterキーが押されます。

## トラブルシューティング

### 自動入力が動作しない場合

1. **フォーカスの確認**
   - ページ読み込み時に入力欄に自動的にフォーカスが当たるサイトで使用してください
   - フォーカスが当たっていない場合、拡張機能は最大10秒間待機します
   - コンソールで "Waiting for focused input" のログを確認してください

2. **クエリパラメータ名が正しいか確認**
   - URLに正しい形式でパラメータが含まれているか確認
   - 例: `?my_query=test`（正しい） vs `?myquery=test`（間違い）

3. **コンソールログを確認**
   - Chrome DevToolsのConsoleタブで `[Auto Query Now]` で始まるログメッセージを確認
   - 待機状態のログ（"Waiting for focused input"）が表示される場合、フォーカスを待っています
   - "No focused input element found" が表示される場合、入力欄にフォーカスが当たっていません

4. **手動でフォーカスを当ててテスト**
   - ページが読み込まれた直後、すぐに入力欄をクリックしてフォーカスを当てることで動作確認できます

5. **値が入力されない場合**
   - サイトによっては、入力検証やセキュリティ対策で自動入力がブロックされる場合があります
   - コンソールログで "Set value" が表示されているか確認してください

## 開発者向け情報

### ファイル構成

```
chrome-auto-query/
├── manifest.json        # 拡張機能の設定ファイル
├── content_script.js    # ページに注入されるスクリプト
├── options.html         # 設定画面のHTML
├── options.js           # 設定画面のロジック
└── README.md           # このファイル
```

### カスタマイズ

`content_script.js` を編集することで、以下のような機能を追加できます：

- 待機時間の調整（`maxAttempts`、`interval`パラメータ）
- 特定のドメインでのみ動作するように制限
- 貼り付け前の値のバリデーション
- カスタムイベントのトリガー
- フォーカス検出ロジックのカスタマイズ

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 注意事項

- この拡張機能は自己責任でご使用ください
- セキュリティ上の理由から、パスワードなどの機密情報をURLパラメータとして渡さないでください
- 一部のサイトではコンテンツセキュリティポリシー（CSP）により動作しない場合があります
